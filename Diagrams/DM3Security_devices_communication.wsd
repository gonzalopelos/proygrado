@startuml Diagrama_de_subsistema_Dm3Security


skinparam componentBorderColor White
skinparam note {
    BackgroundColor HoneyDew
    FontName Verdana
    BorderColor Peru
}

component Dm3Security#PaleGreen{
    (speeds_and_pows_checks) as spwc #MediumAquaMarine
    (connection_checks) as cc #MediumAquaMarine
    (ultrasonic_alert_handle) as uah #MediumAquaMarine
    (bumper_alert_handle) as bah #MediumAquaMarine
    (i2c_alert_handle) as i2cah #MediumAquaMarine
    (atach) as atach #MediumAquaMarine
}

note left of atach
  Provee un mecanismo de 
  registro para recibir
  notificaciones asociadas
  a las alertas de seguridad
end note
component MotorModule#Aquamarine{
    (get_motors_info) as gmi #PaleTurquoise
    (has_i2c_error) as i2ce #PaleTurquoise
    (disable_motors) as disableMotors #PaleTurquoise
    (enable_motors) as enableMotors #PaleTurquoise
}

component Dm3Module#MediumSpringGreen{
    (bumper_state_alert) as dm3m_bsa #DarkTurquoise
    (ultrasonic_distance_alert) as dm3m_uda #DarkTurquoise
    (tcp_connection_alert) as dm3m_tca #DarkTurquoise
    (speed_checks_alert) as dm3m_spca #DarkTurquoise
    (power_speed_inconsistency_alert) as dm3m_psia #DarkTurquoise
    (i2c_motors_status_alert) as dm3m_imsa #DarkTurquoise
    (constructor) as dm3m_ctor #DarkTurquoise
    (update_security_status) as dm3m_uss #DarkTurquoise
}

component Bumper#DarkSeaGreen
component Ultrasonic#DarkSeaGreen
component Communication#YellowGreen{
    (tcp_connection_status)#HoneyDew
}
component "MCC Controller" as MCC #GreenYellow
component "Dm3 Core" as DM3Core#DarkSeaGreen {
    (disable_dm3) as dm3c_disable #DarkSeaGreen
    (enalbe_dm3) as dm3c_enable #DarkSeaGreen
}

spwc --up--> gmi#Blue
i2cah -up-> i2ce#Blue

spwc ....> dm3m_spca#OrangeRed : callback
spwc ....> dm3m_psia#OrangeRed : callback
cc ...> dm3m_tca#OrangeRed : callback
i2cah ..down..> dm3m_imsa#OrangeRed : callback
uah ..> dm3m_uda#OrangeRed : callback
bah ...> dm3m_bsa#OrangeRed : callback
dm3m_ctor --> atach#Blue : se registra para recibir\nnotificaciones asociadas a cada\nmecanismo de seguridad.
dm3m_ctor ..> dm3m_bsa #MediumSeaGreen
dm3m_ctor ..> dm3m_imsa #MediumSeaGreen
dm3m_ctor ..> dm3m_psia #MediumSeaGreen
dm3m_ctor ..> dm3m_spca #MediumSeaGreen
dm3m_ctor ..> dm3m_tca #MediumSeaGreen
dm3m_ctor ..> dm3m_uda #MediumSeaGreen
dm3m_bsa -down-> dm3m_uss  #MediumSeaGreen
dm3m_imsa -down-> dm3m_uss  #MediumSeaGreen
dm3m_psia -down-> dm3m_uss  #MediumSeaGreen
dm3m_spca -down-> dm3m_uss  #MediumSeaGreen
dm3m_tca -down-> dm3m_uss  #MediumSeaGreen
dm3m_uda -down-> dm3m_uss  #MediumSeaGreen
Ultrasonic ---> uah: interrupts
Bumper ---> bah: interrupts
cc -up-> tcp_connection_status#Blue

dm3m_uss ---right---> MCC#blue : send report over MCC
MCC ---up---> Communication#blue : send data over TCP
dm3m_uss -left-> dm3c_enable#blue
dm3m_uss -left-> dm3c_disable#blue

dm3c_enable -left-> enableMotors#blue
dm3c_disable -left-> disableMotors#blue

@enduml

/'
URL Diagram: 
    ![Diagrama_de_subsistema_Dm3Security](http://www.plantuml.com/plantuml/svg/ZLPDRziu4BthLn3LfNjm3isj1wCR6xkzk0sQTXSB5116v4Gc8f4gFse4Y_xt3ab9fXK9iI-soVVcUvxqmJempdSjsqje37HG2Qoihwsq3kdVlhjzGEwDTCz5KTWdgNeW6EEwwxL2vUwq4MXskjM6_NkK3ZEGqWxP_mMZpntmfyPehqI2VYJoynvFyV8lhTmdw93zWqQ0WiJ83D-ZySMlefYyiYokyXvQ_DiWgkJghUqHXQr0YQhN9rln8_8d-mS3osn_ugmye92--_E7XmCOgJ3Hk5OAkPDQvGo-YlUjCs2rahoY08ohZkInnSZoS5oZrRxhqRoarEiK-Mx11HskCy01FqPO_BK0esh6zhJuw9X-J3WYtnlz4v5vnJhaeAJjD1F8wCPWGqDXD0lDfNzSrjBGEPcHZv83fyeXERIQIn1WwGfO6q88eTCtcR7OKCy4Y0ALYFEHzVIWdJO7BNoBPOYqYv4EJMtGLLq0s4ggHnrpQph9OlU_UlF3Qsc7x8z08AeP6gFDM2nSX0ffeMvnC1snmr6CnYwIKCqvwMIPCf_R8SFKaOUUScpowHtcWnRJOUfwYggxxQhQ0YltO9vc0MMZID4xKFm5rOjbgkDzbKt-ZENuCYkksB0cSuxjLqYqZ26nI9MAd4QHKVnvRg6tSjb2QEem1A4-_eLlsQrKA7XpndCt34H4Xt_BzUn5gBuT56PmbXNJsZdleijtiOSHyO0GkvlTVfkwjOROwQxpT0-X9-L_sBRwbC_8h6b3UEKaghyoMsyEknqPLBIvBHNhJKWY79NHOBATmsb22Mum0lU7s_3x8iv1qQVLeOgCbOdZ5mxPPMRZrhJr39xsPeQcKaQTtcnylzbimvgNTwt78abUEDt6ZKwd2Nn3d-rv0ClF1bI3Nr2mzun3szRq07g138EsZEGHjvssO1cL0hgv4Vga9dIOmMMuZ-3jj93Bg3gYHbYzPkmymQ56KRvZFGXZSHHhk13hxsfDgqcfENr_LnUYFwdrJUOjZsnyhaojMu2bbNmTbvR-TLoIbzTnxZfOrCKbM4Xl4ngxsPwNVXaQKxmI6zEy4XjJlHBhheU6b5-7dbMA1eoGDBplcLIE7gg-TxP86fVkwjaTRK_QqaMX6jPsSaqcZ6oEBfeYQIhhSOpf7S5WhmszeVmaNtHN1EdQ96KWzALGvZmIS4Yihxlxp5TutqbvZ-eJQIk8GSuIfCWbQuJbJ_x9qba79slvIyLWxWF5IQ_Ulm40 "Diagrama_de_subsistema_Dm3Security")
'/